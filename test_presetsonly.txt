bun test v1.3.6 (d530ed99)

src\physics\tests\PresetsIntegrity.test.ts:
(pass) End-to-End Preset Integrity > Preset Brightfield successfully routes central rays to targets [46.00ms]
Dichroic dw=-0.7071067811865476 t=347.00000000000006 hitPoint=2.842170943040401e-14,0
Dichroic dw=-0.7071067811865476 t=298.00000000000006 hitPoint=2.842170943040401e-14,0
Dichroic dw=-0.7071067811865476 t=148 hitPoint=0,0
Dichroic dw=-0.7071067811865476 t=81.4000000476837 hitPoint=-7.105427357601002e-15,0
Dichroic Reject: t=0 < 0. rayZ=0, dw=0.7071067811865476
Dichroic Reject: t=-35 < 0. rayZ=24.748737341529164, dw=0.7071067811865476
Dichroic Reject: t=-45 < 0. rayZ=31.81980515339464, dw=0.7071067811865476
Dichroic Reject: t=-64.99999999999997 < 0. rayZ=45.96194077712558, dw=0.7071067811865476
(pass) End-to-End Preset Integrity > Preset Epi-Fluorescence successfully routes central rays to targets [32.00ms]
(pass) End-to-End Preset Integrity > Preset OpenSPIM successfully routes central rays to targets [31.00ms]
(pass) End-to-End Preset Integrity > Preset Transmission Fluorescence successfully routes central rays to targets [31.00ms]
(pass) End-to-End Preset Integrity > Preset Beam Expander successfully routes central rays to targets
Dichroic dw=0.7071067811865476 t=47.000000000000014 hitPoint=0,0
Dichroic Reject: t=0 < 0. rayZ=0, dw=-0.7071067811865476
Dichroic Reject: t=-25.000000000000014 < 0. rayZ=-17.67766952966369, dw=-0.7071067811865471
Dichroic Reject: t=-50.000000000000014 < 0. rayZ=-35.35533905932737, dw=-0.7071067811865472
Dichroic Reject: t=-100.00000000000004 < 0. rayZ=-70.71067811865476, dw=-0.7071067811865472
Dichroic Reject: t=-225.00000000000009 < 0. rayZ=-159.09902576697309, dw=-0.7071067811865468
Dichroic Reject: t=-350.00000000000034 < 0. rayZ=-247.48737341529161, dw=-0.7071067811865468
Dichroic dw=0.7071067811865468 t=400.00000000000045 hitPoint=282.84271247461965,0
Dichroic Reject: out of bounds. R2=156.25, dist2=80000.00000000036
Dichroic dw=0.7071067811865468 t=250.00000000000026 hitPoint=282.8427124746194,0
Dichroic Reject: out of bounds. R2=156.25, dist2=80000.00000000023
Dichroic dw=0.7071067811865468 t=230.00000000000026 hitPoint=282.8427124746194,0
Dichroic Reject: out of bounds. R2=156.25, dist2=80000.00000000023
(pass) End-to-End Preset Integrity > Preset Confocal successfully routes central rays to targets [16.00ms]
  [Brightfield] Camera "CMOS Sensor": 32 paths
(pass) Solver 3 Preset Regression > Solver 3: Brightfield backward rays produce paths [15.00ms]
Dichroic dw=-0.7071067811865476 t=347.00000000000006 hitPoint=2.842170943040401e-14,0
Dichroic dw=-0.7071067811865476 t=298.00000000000006 hitPoint=2.842170943040401e-14,0
Dichroic dw=-0.7071067811865476 t=148 hitPoint=0,0
Dichroic dw=-0.7071067811865476 t=81.4000000476837 hitPoint=-7.105427357601002e-15,0
Dichroic Reject: t=0 < 0. rayZ=0, dw=0.7071067811865476
Dichroic Reject: t=-35 < 0. rayZ=24.748737341529164, dw=0.7071067811865476
Dichroic Reject: t=-45 < 0. rayZ=31.81980515339464, dw=0.7071067811865476
Dichroic Reject: t=-64.99999999999997 < 0. rayZ=45.96194077712558, dw=0.7071067811865476
Dichroic dw=0.7071067811865475 t=360.785 hitPoint=6.894291116568866,4.875
Dichroic dw=0.6662536785287159 t=171.5421133103834 hitPoint=20.210496295592904,14.290978981759515
Dichroic Reject: out of bounds. R2=156.25, dist2=612.6962407712667
Dichroic dw=0.7239451098674742 t=154.56687522121084 hitPoint=1.6400490005463126,1.1596897697645785
Dichroic dw=0.7239451098674742 t=141.24386762858634 hitPoint=1.6400490005463269,1.1596897697645785
Dichroic Reject: t=0 < 0. rayZ=0, dw=0.7239451098674742
Dichroic Reject: t=-33.3590076604837 < 0. rayZ=24.51715447878763, dw=0.734948555074379
Dichroic dw=0.7071067811865475 t=360.785 hitPoint=6.894291116568866,4.875
Dichroic dw=0.6662536785287159 t=171.5421133103834 hitPoint=20.210496295592904,14.290978981759515
Dichroic Reject: out of bounds. R2=156.25, dist2=612.6962407712667
Dichroic dw=0.7239451098674742 t=154.56687522121084 hitPoint=1.6400490005463126,1.1596897697645785
Dichroic dw=0.7071067811865475 t=357.53499999999997 hitPoint=2.298097038856241,4.875
Dichroic dw=0.693057519082781 t=161.7018971488583 hitPoint=6.471363945103917,13.727835995159676
Dichroic Reject: out of bounds. R2=156.25, dist2=230.3320324199926
Dichroic dw=0.712612514140312 t=153.62396755756188 hitPoint=0.5627938249418492,1.1938661139399507
Dichroic dw=0.712612514140312 t=140.44421394186378 hitPoint=0.5627938249418634,1.1938661139399516
Dichroic Reject: t=0 < 0. rayZ=0, dw=0.712612514140312
Dichroic Reject: t=-34.43901977694391 < 0. rayZ=24.668414816757874, dw=0.716292594171707
Dichroic dw=0.7071067811865475 t=357.53499999999997 hitPoint=2.298097038856241,4.875
Dichroic dw=0.693057519082781 t=161.7018971488583 hitPoint=6.471363945103917,13.727835995159676
Dichroic Reject: out of bounds. R2=156.25, dist2=230.3320324199926
Dichroic dw=0.712612514140312 t=153.62396755756188 hitPoint=0.5627938249418492,1.1938661139399507
Dichroic dw=0.7071067811865475 t=354.28499999999997 hitPoint=-2.298097038856298,4.875
Dichroic dw=0.7188094626206876 t=152.69900517022117 hitPoint=-6.239521979326071,13.236024923276174
Dichroic Reject: out of bounds. R2=156.25, dist2=214.12399030008118
Dichroic dw=0.7011352436759546 t=152.82127816076633 hitPoint=-0.5720065113016659,1.2134091747436488
Dichroic dw=0.7011352436759546 t=139.64152454395858 hitPoint=-0.5720065113016659,1.2134091747436493
Dichroic Reject: t=0 < 0. rayZ=0, dw=0.7011352436759546
Dichroic Reject: t=-35.653180171258846 < 0. rayZ=24.833901462838966, dw=0.69654099139404
Dichroic dw=0.7071067811865475 t=354.28499999999997 hitPoint=-2.298097038856298,4.875
Dichroic dw=0.7188094626206876 t=152.69900517022117 hitPoint=-6.239521979326071,13.236024923276174
Dichroic Reject: out of bounds. R2=156.25, dist2=214.12399030008118
Dichroic dw=0.7011352436759546 t=152.82127816076633 hitPoint=-0.5720065113016659,1.2134091747436488
Dichroic dw=0.7071067811865475 t=351.035 hitPoint=-6.894291116568837,4.875
Dichroic dw=0.7437111060792243 t=144.36691566927144 hitPoint=-18.105575393135737,12.802575137770717
Dichroic Reject: out of bounds. R2=156.25, dist2=491.7177904747872
Dichroic dw=0.6894256161291036 t=152.1880123501811 hitPoint=-1.7221661425272714,1.2177553577109697
Dichroic dw=0.6894256161291036 t=138.86500475755662 hitPoint=-1.7221661425272714,1.2177553577109697
Dichroic Reject: t=0 < 0. rayZ=0, dw=0.6894256161291036
Dichroic Reject: t=-36.91676338069023 < 0. rayZ=24.988164903097, dw=0.6768785401205397
Dichroic dw=0.7071067811865475 t=351.035 hitPoint=-6.894291116568837,4.875
Dichroic dw=0.7437111060792243 t=144.36691566927144 hitPoint=-18.105575393135737,12.802575137770717
Dichroic Reject: out of bounds. R2=156.25, dist2=491.7177904747872
Dichroic dw=0.6894256161291036 t=152.1880123501811 hitPoint=-1.7221661425272714,1.2177553577109697
Dichroic dw=0.7071067811865475 t=360.785 hitPoint=6.894291116568866,1.625
Dichroic dw=0.6673055754721329 t=171.39964911439392 hitPoint=20.163299742001357,4.752535320806819
Dichroic Reject: out of bounds. R2=156.25, dist2=429.14524846130837
Dichroic dw=0.7240897840163095 t=154.4012108386181 hitPoint=1.6616197694991115,0.39164749327250337
Dichroic dw=0.7240897840163095 t=141.22145722181037 hitPoint=1.6616197694990973,0.39164749327250337
Dichroic Reject: t=0 < 0. rayZ=0, dw=0.7240897840163095
Dichroic Reject: t=-33.29002251853462 < 0. rayZ=24.50292805816113, dw=0.7360442019682875
Dichroic dw=0.7071067811865475 t=360.785 hitPoint=6.894291116568866,1.625
Dichroic dw=0.6673055754721329 t=171.39964911439392 hitPoint=20.163299742001357,4.752535320806819
Dichroic Reject: out of bounds. R2=156.25, dist2=429.14524846130837
Dichroic dw=0.7240897840163095 t=154.4012108386181 hitPoint=1.6616197694991115,0.39164749327250337
Dichroic dw=0.7071067811865475 t=357.53499999999997 hitPoint=2.298097038856241,1.625
Dichroic dw=0.6940308064203299 t=161.598885681856 hitPoint=6.457416475157785,4.56608297852997
Dichroic dw=0.7127843706762663 t=153.4482499649232 hitPoint=0.57009032369929,0.40311473377663853
Dichroic dw=0.7127843706762663 t=140.41231578287972 hitPoint=0.57009032369929,0.40311473377663853
Dichroic Reject: t=0 < 0. rayZ=0, dw=0.7127843706762663
Dichroic Reject: t=-34.394699752550046 < 0. rayZ=24.662274671052984, dw=0.7170370681670075
Dichroic dw=0.7071067811865475 t=357.53499999999997 hitPoint=2.298097038856241,1.625
Dichroic dw=0.6940308064203299 t=161.598885681856 hitPoint=6.457416475157785,4.56608297852997
Dichroic dw=0.7127843706762663 t=153.4482499649232 hitPoint=0.57009032369929,0.40311473377663853
Dichroic dw=0.7071067811865475 t=354.28499999999997 hitPoint=-2.298097038856298,1.625
Dichroic dw=0.7197161737054824 t=152.6267148302388 hitPoint=-6.2269629714888595,4.403127743337466
Dichroic dw=0.7013365199938006 t=152.63538722721162 hitPoint=-0.579395854945929,0.40969473802369505
Dichroic dw=0.7013365199938006 t=139.5994530451681 hitPoint=-0.5793958549459433,0.40969473802369527
Dichroic Reject: t=0 < 0. rayZ=0, dw=0.7013365199938006
Dichroic Reject: t=-35.63875313373233 < 0. rayZ=24.836270397930093, dw=0.6968894311406868
Dichroic dw=0.7071067811865475 t=354.28499999999997 hitPoint=-2.298097038856298,1.625
Dichroic dw=0.7197161737054824 t=152.6267148302388 hitPoint=-6.2269629714888595,4.403127743337466
Dichroic dw=0.7013365199938006 t=152.63538722721162 hitPoint=-0.579395854945929,0.40969473802369505
Dichroic dw=0.7071067811865475 t=351.035 hitPoint=-6.894291116568837,1.625
Dichroic dw=0.7445614061968813 t=144.31887435446487 hitPoint=-18.071151980523922,4.2594113674399985
Dichroic Reject: out of bounds. R2=156.25, dist2=344.70911910027075
Dichroic dw=0.689657973755717 t=151.99187196771902 hitPoint=-1.744577655724001,0.4112008560367022
Dichroic dw=0.689657973755717 t=138.81211835202092 hitPoint=-1.7445776557240151,0.4112008560367022
Dichroic Reject: t=0 < 0. rayZ=0, dw=0.689657973755717
Dichroic Reject: t=-36.93820973302029 < 0. rayZ=24.99938821206929, dw=0.6767893840215411
Dichroic dw=0.7071067811865475 t=351.035 hitPoint=-6.894291116568837,1.625
Dichroic dw=0.7445614061968813 t=144.31887435446487 hitPoint=-18.071151980523922,4.2594113674399985
Dichroic Reject: out of bounds. R2=156.25, dist2=344.70911910027075
Dichroic dw=0.689657973755717 t=151.99187196771902 hitPoint=-1.744577655724001,0.4112008560367022
Dichroic dw=0.7071067811865475 t=360.785 hitPoint=6.894291116568866,-1.625
Dichroic dw=0.6673055755080246 t=171.39964910562176 hitPoint=20.16329972962238,-4.752535320531498
Dichroic Reject: out of bounds. R2=156.25, dist2=429.1452479594894
Dichroic dw=0.724089784050561 t=154.40121082893705 hitPoint=1.6616197571185296,-0.39164749117696185
Dichroic dw=0.724089784050561 t=141.22145721323898 hitPoint=1.661619757118558,-0.39164749117696185
Dichroic Reject: t=0 < 0. rayZ=0, dw=0.724089784050561
Dichroic Reject: t=-33.29002254330414 < 0. rayZ=24.502928065547025, dw=0.7360442016424971
Dichroic dw=0.7071067811865475 t=360.785 hitPoint=6.894291116568866,-1.625
Dichroic dw=0.6673055755080246 t=171.39964910562176 hitPoint=20.16329972962238,-4.752535320531498
Dichroic Reject: out of bounds. R2=156.25, dist2=429.1452479594894
Dichroic dw=0.724089784050561 t=154.40121082893705 hitPoint=1.6616197571185296,-0.39164749117696185
Dichroic dw=0.7071067811865475 t=357.53499999999997 hitPoint=2.298097038856241,-1.625
Dichroic dw=0.6940308064203299 t=161.598885681856 hitPoint=6.457416475157785,-4.56608297852965
Dichroic dw=0.7127843706762664 t=153.44824996492318 hitPoint=0.5700903236992474,-0.4031147337765504
Dichroic dw=0.7127843706762664 t=140.4123157828797 hitPoint=0.5700903236992616,-0.4031147337765504
Dichroic Reject: t=0 < 0. rayZ=0, dw=0.7127843706762664
Dichroic Reject: t=-34.39469975255009 < 0. rayZ=24.662274671052998, dw=0.717037068167007
Dichroic dw=0.7071067811865475 t=357.53499999999997 hitPoint=2.298097038856241,-1.625
Dichroic dw=0.6940308064203299 t=161.598885681856 hitPoint=6.457416475157785,-4.56608297852965
Dichroic dw=0.7127843706762664 t=153.44824996492318 hitPoint=0.5700903236992474,-0.4031147337765504
Dichroic dw=0.7071067811865475 t=354.28499999999997 hitPoint=-2.298097038856298,-1.625
Dichroic dw=0.7197161737054824 t=152.6267148302388 hitPoint=-6.2269629714888595,-4.403127743337159
Dichroic dw=0.7013365199938006 t=152.63538722721162 hitPoint=-0.5793958549459148,-0.40969473802360845
Dichroic dw=0.7013365199938006 t=139.5994530451681 hitPoint=-0.5793958549459433,-0.4096947380236089
Dichroic Reject: t=0 < 0. rayZ=0, dw=0.7013365199938006
Dichroic Reject: t=-35.63875313373232 < 0. rayZ=24.836270397930093, dw=0.6968894311406869
Dichroic dw=0.7071067811865475 t=354.28499999999997 hitPoint=-2.298097038856298,-1.625
Dichroic dw=0.7197161737054824 t=152.6267148302388 hitPoint=-6.2269629714888595,-4.403127743337159
Dichroic dw=0.7013365199938006 t=152.63538722721162 hitPoint=-0.5793958549459148,-0.40969473802360845
Dichroic dw=0.7071067811865475 t=351.035 hitPoint=-6.894291116568837,-1.625
Dichroic dw=0.744561406229034 t=144.31887434778062 hitPoint=-18.071151989866095,-4.25941136741668
Dichroic Reject: out of bounds. R2=156.25, dist2=344.7091194377198
Dichroic dw=0.6896579737918292 t=151.9918719595745 hitPoint=-1.7445776685487857,-0.41120085824586994
Dichroic dw=0.6896579737918292 t=138.81211834276672 hitPoint=-1.7445776685488,-0.41120085824587016
Dichroic Reject: t=0 < 0. rayZ=0, dw=0.6896579737918292
Dichroic Reject: t=-36.938209763825775 < 0. rayZ=24.99938821974108, dw=0.6767893836648091
Dichroic dw=0.7071067811865475 t=351.035 hitPoint=-6.894291116568837,-1.625
Dichroic dw=0.744561406229034 t=144.31887434778062 hitPoint=-18.071151989866095,-4.25941136741668
Dichroic Reject: out of bounds. R2=156.25, dist2=344.7091194377198
Dichroic dw=0.6896579737918292 t=151.9918719595745 hitPoint=-1.7445776685487857,-0.41120085824586994
Dichroic dw=0.7071067811865475 t=360.785 hitPoint=6.894291116568866,-4.875
Dichroic dw=0.666253678528716 t=171.54211331038337 hitPoint=20.210496295592904,-14.290978981759178
Dichroic Reject: out of bounds. R2=156.25, dist2=612.6962407712571
Dichroic dw=0.7239451098674741 t=154.56687522121086 hitPoint=1.640049000546341,-1.1596897697644941
Dichroic dw=0.7239451098674741 t=141.24386762858637 hitPoint=1.640049000546341,-1.1596897697644941
Dichroic Reject: t=0 < 0. rayZ=0, dw=0.7239451098674741
Dichroic Reject: t=-33.35900766048368 < 0. rayZ=24.51715447878763, dw=0.7349485550743794
Dichroic dw=0.7071067811865475 t=360.785 hitPoint=6.894291116568866,-4.875
Dichroic dw=0.666253678528716 t=171.54211331038337 hitPoint=20.210496295592904,-14.290978981759178
Dichroic Reject: out of bounds. R2=156.25, dist2=612.6962407712571
Dichroic dw=0.7239451098674741 t=154.56687522121086 hitPoint=1.640049000546341,-1.1596897697644941
Dichroic dw=0.7071067811865475 t=357.53499999999997 hitPoint=2.298097038856241,-4.875
Dichroic dw=0.6930575190804792 t=161.70189714894815 hitPoint=6.471363945260848,-13.727836002971689
Dichroic Reject: out of bounds. R2=156.25, dist2=230.33203263650773
Dichroic dw=0.7126125141321842 t=153.62396756062657 hitPoint=0.5627938279671127,-1.1938661228166572
Dichroic dw=0.7126125141321842 t=140.44421394381882 hitPoint=0.5627938279671127,-1.1938661228166572
Dichroic Reject: t=0 < 0. rayZ=0, dw=0.7126125141321842
Dichroic Reject: t=-34.43901977133989 < 0. rayZ=24.66841481506323, dw=0.7162925942390571
Dichroic dw=0.7071067811865475 t=357.53499999999997 hitPoint=2.298097038856241,-4.875
Dichroic dw=0.6930575190804792 t=161.70189714894815 hitPoint=6.471363945260848,-13.727836002971689
Dichroic Reject: out of bounds. R2=156.25, dist2=230.33203263650773
Dichroic dw=0.7126125141321842 t=153.62396756062657 hitPoint=0.5627938279671127,-1.1938661228166572
Dichroic dw=0.7071067811865475 t=354.28499999999997 hitPoint=-2.298097038856298,-4.875
Dichroic dw=0.7188094626221249 t=152.69900517036763 hitPoint=-6.2395219791830385,-13.236024915909605
Dichroic Reject: out of bounds. R2=156.25, dist2=214.1239901032881
Dichroic dw=0.701135243665966 t=152.821278162005 hitPoint=-0.5720065082415573,-1.2134091658019241
Dichroic dw=0.701135243665966 t=139.6415245463069 hitPoint=-0.5720065082415715,-1.2134091658019246
Dichroic Reject: t=0 < 0. rayZ=0, dw=0.701135243665966
Dichroic Reject: t=-35.65318016338441 < 0. rayZ=24.833901460858485, dw=0.696540991492331
Dichroic dw=0.7071067811865475 t=354.28499999999997 hitPoint=-2.298097038856298,-4.875
Dichroic dw=0.7188094626221249 t=152.69900517036763 hitPoint=-6.2395219791830385,-13.236024915909605
Dichroic Reject: out of bounds. R2=156.25, dist2=214.1239901032881
Dichroic dw=0.701135243665966 t=152.821278162005 hitPoint=-0.5720065082415573,-1.2134091658019241
Dichroic dw=0.7071067811865475 t=351.035 hitPoint=-6.894291116568837,-4.875
Dichroic dw=0.7437111060792244 t=144.3669156692714 hitPoint=-18.105575393135737,-12.802575137770418
Dichroic Reject: out of bounds. R2=156.25, dist2=491.7177904747796
Dichroic dw=0.6894256161291037 t=152.18801235018108 hitPoint=-1.722166142527314,-1.2177553577108857
Dichroic dw=0.6894256161291037 t=138.8650047575566 hitPoint=-1.7221661425272998,-1.2177553577108857
Dichroic Reject: t=0 < 0. rayZ=0, dw=0.6894256161291037
Dichroic Reject: t=-36.916763380690305 < 0. rayZ=24.98816490309703, dw=0.676878540120539
Dichroic dw=0.7071067811865475 t=351.035 hitPoint=-6.894291116568837,-4.875
Dichroic dw=0.7437111060792244 t=144.3669156692714 hitPoint=-18.105575393135737,-12.802575137770418
Dichroic Reject: out of bounds. R2=156.25, dist2=491.7177904747796
Dichroic dw=0.6894256161291037 t=152.18801235018108 hitPoint=-1.722166142527314,-1.2177553577108857
  [Epi-Fluorescence] Camera "CMOS Sensor": 6 paths
(pass) Solver 3 Preset Regression > Solver 3: Epi-Fluorescence backward rays produce paths [32.00ms]
  [OpenSPIM] Camera "sCMOS Camera": 0 paths
134 | 
135 |             const solver3 = new Solver3(components, beamSegs);
136 |             const result = solver3.render(camera, 16);
137 | 
138 |             console.log(`  [${presetName}] Camera "${camera.name}": ${result.paths.length} paths`);
139 |             expect(result.paths.length).toBeGreaterThan(0);
                                              ^
error: expect(received).toBeGreaterThan(expected)

Expected: > 0
Received: 0

      at <anonymous> (C:\Users\Bez\Documents\GitHub\microscope_builder_4\src\physics\tests\PresetsIntegrity.test.ts:139:41)
(fail) Solver 3 Preset Regression > Solver 3: OpenSPIM backward rays produce paths [31.00ms]
  [Transmission Fluorescence] Camera "CMOS Sensor": 6 paths
(pass) Solver 3 Preset Regression > Solver 3: Transmission Fluorescence backward rays produce paths [16.00ms]
  OpenSPIM camera at (37.5, 237.5), backward dir: (1.00, 0.00, -0.00)
(pass) Solver 3: OpenSPIM Camera Facing > OpenSPIM camera backward rays fire toward +X (detection arm)

 10 pass
 1 fail
 22 expect() calls
Ran 11 tests across 1 file. [386.00ms]
